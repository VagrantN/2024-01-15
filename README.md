# Веб-сервер для проверки доступности ссылок

## Описание
Простой веб-сервер на Go для проверки доступности интернет-ресурсов. Позволяет отправлять списки ссылок и получать отчеты в PDF формате.

## Функциональность
- **Проверка ссылок**: Принимает список URL и проверяет их доступность
- **Сохранение истории**: Каждому запросу присваивается уникальный номер
- **PDF отчеты**: Генерация отчетов по номерам ранее проверенных ссылок
- **Устойчивость к перезагрузке**: Данные сохраняются в файл и восстанавливаются при restart

## Как использовать

### 1. Проверка ссылок
Отправьте POST запрос на `/check-links`:

**Запрос:**
```json
{
  "links": ["google.com", "yandex.ru", "invalid-site.xyz"]
}

Ответ:

{
  "links": {
    "google.com": "available",
    "yandex.ru": "available",
    "invalid-site.xyz": "not available"
  },
  "links_num": 1
}

2. Получение PDF отчета
Отправьте POST запрос на /generate-report:

Запрос:

{
  "links_list": [1, 2, 3]
}

Ответ: PDF файл с отчетом о статусе всех ссылок из указанных номеров

Запуск проекта
Установите зависимость для генерации PDF:

bash
go get github.com/jung-kurt/gofpdf
Запустите сервер:

bash
go run start.go
Сервер будет доступен по адресу: http://localhost:8080

Примеры запросов
Проверка ссылок (PowerShell):
powershell
$body = '{"links": ["google.com", "yandex.ru", "invalid-site.xyz"]}'
Invoke-RestMethod -Uri "http://localhost:8080/check-links" -Method POST -ContentType "application/json" -Body $body

Получение PDF отчета (curl):
bash
curl -X POST http://localhost:8080/generate-report -H "Content-Type: application/json" -d '{"links_list": [1, 2]}' --output report.pdf
Как работает
Хранение данных
Все данные хранятся в памяти во время работы сервера

При каждом изменении данные автоматически сохраняются в файл data.json

При запуске сервера данные загружаются из файла (если он существует)

Проверка ссылок
Для каждой ссылки отправляется HTTP GET запрос

Если сайт отвечает со статусом 200 - ссылка "available"

В противном случае - "not available"

Ссылки проверяются последовательно

## Обработка перезагрузки

Сервер сохраняет данные после завершения каждого запроса. 
При перезагрузке восстанавливается вся история проверок.

**Ограничение:** Запросы, находящиеся в процессе обработки в момент остановки сервера, могут быть потеряны.

Генерация PDF
Создается простой отчет в формате PDF

## Тестирование работы

### Быстрая проверка PDF генерации
Для тестирования без Postman/curl (у меня почему то curl не запускается, нужно делать нормальный сервер клиент) добавьте в функцию `main()` временный обработчик:

http.HandleFunc("/test-pdf", func(w http.ResponseWriter, r *http.Request) {
    // Тестовые данные
    allLinks := []LinkStatus{
        {URL: "google.com", Status: "available"},
        {URL: "yandex.ru", Status: "available"},
        {URL: "invalid.gg", Status: "not available"},
    }
    
    // Генерируем PDF
    pdf := generatePDF(allLinks)
    
    // Отправляем как файл
    w.Header().Set("Content-Type", "application/pdf")
    w.Header().Set("Content-Disposition", "attachment; filename=report.pdf")
    w.Write(pdf)
})
Затем откройте в браузере: http://localhost:8080/test-pdf - должен скачаться тестовый PDF файл.

В отчете список всех ссылок с их статусами

Отчет скачивается как файл report.pdf

Проверка основного функционала
Для полного тестирования потребуется:

Клиент для API-запросов (Postman, Insomnia, или curl)

Или написать простой HTML-файл с формой для отправки запросов

Особенности
Не требует установки баз данных или Docker

Простая архитектура - легко понять и модифицировать

Самодостаточное решение


Автоматическое создание файла данных при первом запуске

